{% extends "base.html" %}
{% load static from staticfiles %}
{% load media_tags %}
{% block extrahead %}
    <script src='{% static "audioplayer/audioplayer.js" %}' type="text/javascript"></script>
    <link rel='stylesheet' type="text/css" href="{% static 'audioplayer/audioplayer.css' %}"/>
    <script src='{% static "js/profile.js" %}' type="text/javascript"></script>

    <style>
        {% if request.user.userprofile.background_image %}
            .main-wrap .profile-landing-bg::before {
                background: url('{{ MEDIA_URL }}{{ request.user.userprofile.background_image }}') no-repeat top center;
            }
        {% endif %}
    </style>

{% endblock %}

{% block header %}
    <!--Start: Header-->
    <div class="nav-top blue-bg mobnav">
        <div class="back-icon-headbar hidden-xs"><a href="#"><i class="fa fa-chevron-circle-left fa-4"></i></a></div>
        {% if display == "profile" %}
        <ul>
            <li class="hidden-xs">{{ request.user|upper }}</li>
            <li  class="hidden-xs"><a href="#">ABOUT</a></li>
            <li  class="hidden-xs"><a class=" top-menu" href="{% url 'add_audio_step1' %}" data-toggle="modal" data-target="#upload_music_modal">MUSIC</a></li>
            <li  class="hidden-xs"><a class=" top-menu" href="{% url 'add_video_step1' %}" data-toggle="modal" data-target="#upload_music_modal">VIDEO</a></li>
            <li  class="hidden-xs"><a class=" top-menu" href="{% url 'add_playlist' %}" data-toggle="modal" data-target="#upload_music_modal">PLAYLIST</a></li>
            <li class="pull-left"><a id="left-menu" href="#left-menu" class="menu-icon">menu</a></li>
            <li class="pull-right"><a id="right-menu" href="#right-menu" class="dashboard-icon">Dashboard menu</a></li>
        </ul>
        {% else %}
        <ul>
            <li class="hidden-xs">{{ user|upper }}</li>
            <li  class="hidden-xs"><a href="#about">ABOUT</a></li>
            <li  class="hidden-xs"><a class=" top-menu" href="#music">MUSIC</a></li>
            <li  class="hidden-xs"><a class=" top-menu" href="#video">VIDEO</a></li>
            <li  class="hidden-xs"><a class=" top-menu" href="#playlist">PLAYLIST</a></li>
            <li class="pull-left"><a id="left-menu" href="#left-menu" class="menu-icon">menu</a></li>
            <li class="pull-right"><a id="right-menu" href="#right-menu" class="dashboard-icon">Dashboard menu</a></li>
        </ul>
        {% endif %}
    </div>
{% endblock header %}

{% block content %}


        <!--Start: Inner Main Wrap-->
        <div class="main-wrap">
{{ request.user.userpofile.background_image }}
            <div class="content profile-bg-blue profile-landing-bg">
                <div  class="profile-head" style="min-height:450px">
                    <div class="profile-pic" id="blurpoint" style="overflow:hidden; width: 130px;height:130px;"><img src="{{ MEDIA_URL }}{{ request.user.userprofile.picture }}" class="img-responsive img-circle"  alt="" width="130" height="130">
                        <div class="click-to-move" style="display: none">DRAG AND DROP <span class="or">OR</span> CLICK TO MOVE! </div>
                    </div>

                    <h3>{{ user.userprofile.display_name|capfirst }}</h3>
                    <p> Hey Guys, I just won the competition, Iâ€™m Amazing, follow meee!</p>
                    {% if display == "profile" %}
                    <ul>
                        <li><a href="#" class="btn-pro" id="edit_button">EDIT</a></li>
                    </ul>
                    {% endif %}
                </div>

                <div class="row">
                    {% if audios %}
                    <div class="frame clearfix audio_box col-sm-6">
                        {% audio audios.0 request.user display "large" %}
                    </div>
                    {% endif %}
                    <!-- <div class="col-sm-6">
                        <div class="frame clearfix transparent-frame">
                            <div class="lv-emerging"></div>
                            <div class="fame-position-block">
                                <div class="fame-pos-txtb"> <span class="fame-pos-txt">FAME POSITION</span> <span class="fame-pos-num">51,450</span> </div>
                                <div class="fame-pos-now"><img src="{{ MEDIA_URL }}images/graph-now.png"  class="img-responsive" alt=""></div>
                            </div>
                        </div>
                    </div> -->
                    <div class="col-sm-6">
                        <div class="frame badges badge-black clearfix transparent-frame">
                            <h3>Badges</h3>

                            <div class="badge-big-icon"><img src="{{ MEDIA_URL }}images/badge-big-icon.png" class="img-responsive" alt=""></div>
                            <ul class="badges-list">

                                <li><a href="#"><img src="{{ MEDIA_URL }}images/task-icon4.png"  class="img-responsive" alt=""></a></li>
                                <li><a href="#"><img src="{{ MEDIA_URL }}images/badges.png" class="img-responsive" alt=""></a></li>
                                <li><a href="#"><img src="{{ MEDIA_URL }}images/badges.png" class="img-responsive" alt=""></a></li>
                                <li><a href="#"><img src="{{ MEDIA_URL }}images/task-icon5.png"  class="img-responsive" alt=""></a></li>
                                <li><a href="#"><img src="{{ MEDIA_URL }}images/badges.png" class="img-responsive" alt=""></a></li>
                                <li><a href="#"><img src="{{ MEDIA_URL }}images/badges.png" class="img-responsive" alt=""></a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                {% for audio in audios2 %}
                    <div class="frame clearfix audio_box">
                        {% audio audios.0 request.user display "large" %}
                    </div>
                {% endfor %}

                <div class="row" id="about">
                    <div class="col-sm-6">
                        <div class="overview-about">
                            <h3>About</h3>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt
                                ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                                exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
                                dolore eu fugiat nulla pariatur. </p>
                        </div>
                    </div>
                    <div class="col-sm-6 hidden-xs">
                        <div class="frame">
                            <div class="row">
                                <div class="col-sm-7">
                                    <ul class="about-profile-info">
                                        <li><span class="address"></span>Paris, France</li>
                                        <li><span class="music"></span>Electro</li>
                                        <li><span class="daft"></span>Daft Punk, Martin Garrix</li>
                                        <li><span class="producer"></span>Producer, DJ, Composer</li>
                                    </ul>
                                </div>
                                <div class="col-sm-5 bdr-lft">
                                    <ul class="about-social">
                                        <li><a href="#" class="dribble"></a></li>
                                        <li><a href="#" class="cloud1"></a></li>
                                        <li><a href="#" class="twitter"></a></li>
                                        <li><a href="#" class="cloud2"></a></li>
                                        <li><a href="#" class="fb"></a></li>
                                        <li><a href="#" class="cloud3"></a></li>
                                        <li><a href="#" class="youtube"></a></li>
                                        <li><a href="#" class="vimeo"></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mobpad" id="music">
                    <h2 class="title"> Music</h2>

                    {% for audio in audios %}
                        <div class="col-xs-6 col-sm-3">
                            {% audio audio request.user display "small" %}
                        </div>
                    {% endfor %}
                </div>
                <div class="row mobpad" id="video">
                    <h2 class="title"> Videos</h2>

                    {% for v in videos %}
                        <div class="col-sm-6">
                            <div class="music-overview-block video_box">
                                <div class="playlist-thumb-hover" style="display: none">
                                    <ul class="pl-list">
                                        <li><a href="#" class="heart">ddd</a></li>
                                        <li><a href="#" class="comment">ddd</a></li>
                                        <li><a href="#" class="playlist-play">ddd</a></li>
                                        <li><a href="#" class="share">ddd</a></li>
                                    </ul>
                                    <div class="play-pl-cont"> <a href="{% url 'videocard' video_id=v.id %}" data-toggle="modal" data-target="#trackcard" class="play-pl">Play</a> </div>
                                    <div class="hover-title">
                                        <h5>{{ v.name }}</h5>
                                        <span class="subtxt">{{ v.artist }}</span> </div>
                                </div>
                                <img src="{{ MEDIA_URL }}{{ v.cover }}"  class="img-responsive" alt=""></div>
                        </div>
                    {% endfor %}


                </div>
                <div class="row mobpad" id="playlist">
                    <h2 class="title">Playlist</h2>

                    {% for p in playlists %}

                        <div class="col-sm-3">
                            <div class="music-overview-block playlist_box">
                                <div class="relative">
                                    <div class="playlist-thumb-hover" style="display:none;">
                                        <ul class="pl-list">
                                            <li><a href="#" class="heart">ddd</a></li>
                                            <li><a href="#" class="comment">ddd</a></li>
                                            <li><a href="#" class="playlist-play">ddd</a></li>
                                            <li><a href="#" class="share">ddd</a></li>
                                        </ul>
                                        <div class="play-pl-cont"> <a href="{% url 'playlistcard' playlist_id=p.id %}" class="play-pl" data-toggle="modal" data-target="#upload_music_modal" >Play</a> </div>
                                        <div class="hover-title">
                                            <h5>{{ p.title }}</h5>
                                            <span class="subtxt">{{ p.artist }}</span>
                                        </div>
                                    </div>
                                    <img src="{{ MEDIA_URL }}{{ p.cover }}" class="img-responsive" alt=""></div>
                                <div class="playlist-list">
                                    <ol>
                                        {% for obj in p.files %}
                                            <li>{{ obj.audio.name }}<span class="subtext">{{ obj.audio.artist }}</span></li>
                                        {% endfor %}
                                    </ol>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <h2 class="title">Instagram</h2>
                <div class="frame clearfix">
                    <ul class="instagram">
                        {% if instagram %}
                            {% for i in instagram %}
                                <li><a href=""><img src="{{ i }}" class="img-responsive" alt=""/></a></li>
                            {% endfor %}
                            <li style="padding-top:30px"><a href="http://instagram.com/{{ nickname }}/" class="btn btn-more">View More</a></li>
                        {% else %}
                            {% if display == "profile" %}
                                <a href="{% url 'social:begin' 'instagram' %}">Connect to instagram</a>
                            {% endif %}
                        {% endif %}

                        {% if display == "profile" %}
                            {% csrf_token %}
                        {% endif %}
                    </ul>
                </div>
            </div>

            <!--Start: Bannner-->

        </div>
        <!--End: Inner Main Wrap-->


    <div class="modal modal-absolute" id="upload_music_modal">
        <div class="modal-dialog" style="z-index: 9991">
            <div class="modal-content modal-music">
                <div class="modal-body">
                </div>
            </div>
        </div>
    </div>

    <div class="modal modal-track modal-absolute" id="trackcard">
        <div class="modal-dialog" style="z-index: 9991">
            <div class="modal-content modal-contnet-bg">
            </div>
        </div>
    </div>

    <!--Start: Check if profile is valid-->
    {% if not valid %}
        <script>
            window.location.href = "/user/register/{{ user_id }}/";
        </script>
    {% endif %}
    <!--End: Check if profile is valid-->

{% endblock %}

{% block extra-script %}
<script src="{% static "js/jquery.waypoints.min.js" %}"></script>
<script>
{#$(function() {#}
{#$('#blurpoint').waypoint({#}
{#  handler: function(direction) {#}
{#    if (direction == "down") {#}
{#        $(".profile-landing-bg").addClass("fading");#}
{#    } else {#}
{#        $(".profile-landing-bg").removeClass("fading");#}
{#    }#}
{#  }#}
{#})#}
{#});#}
</script>
{% endblock extra-script %}